apiVersion: networking.istio.io/v1alpha3
kind: Gateway
metadata:
  name: api
spec:
  selector:
    istio: ingressgateway # use Istio default gateway implementation
  servers:
  - port:
      number: 80
      name: http
      protocol: HTTP
    hosts:
    - api.xiaowenx.com
  - port:
      number: 443
      name: https
      protocol: HTTPS
    tls:
      mode: SIMPLE
      credentialName: api.xiaowenx.com # must be the same as secret
    hosts:
    - api.xiaowenx.com

---

apiVersion: v1
data:
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZKVENDQkEyZ0F3SUJBZ0lTQktCV2g3VXM5VWl6clFzWmxuMFlWVmxFTUEwR0NTcUdTSWIzRFFFQkN3VUEKTURJeEN6QUpCZ05WQkFZVEFsVlRNUll3RkFZRFZRUUtFdzFNWlhRbmN5QkZibU55ZVhCME1Rc3dDUVlEVlFRRApFd0pTTXpBZUZ3MHlNVEF4TURrd056TTNNVEZhRncweU1UQTBNRGt3TnpNM01URmFNQnN4R1RBWEJnTlZCQU1UCkVHRndhUzU0YVdGdmQyVnVlQzVqYjIwd2dnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUJEd0F3Z2dFS0FvSUIKQVFEVTNrQlcvK1lPaHdlL0ptOUxFSk9VUDlxT3lCNVFaR1lYaDU2MkwxVUhoS2ZKdWoxOXorWlBzN29rZ0poYQpocDlyWTNLZHN0QWRXLy9DQTg3eWp2QmdCdUQ3dlYrbmtMQ0JiV2k5eXRmZFlqSkZMRk5QbG5BSEpnemZzbDNtCmhvemYwQ0VGeGtyb3BWWG1pV3hnR0V6RlZwTmZXNVhuUkRNRVh4dnArK2tUWHNJWG1PWHR3Nnc2TTZDK1J6VWYKNVUvaFl4VG9JTlk0cHZaMjZsNTBMZUF1d0VBUWpnWURlUUJBZGhNVnFudkRPd083NHFwK0EvK1J2L3ZVaFVFVgovS1Bhcm0wWWNKUzZvNzNlUzd1cXFOWjl4OFd6aTZvTTFkM2Z4N0gxR2ZndDFvNzRMVEVvQnFIOU9Rb08vVlQ0Ci9uTUNQRGFJUkdvKzc0RFB5VG9kZU9OTkFnTUJBQUdqZ2dKS01JSUNSakFPQmdOVkhROEJBZjhFQkFNQ0JhQXcKSFFZRFZSMGxCQll3RkFZSUt3WUJCUVVIQXdFR0NDc0dBUVVGQndNQ01Bd0dBMVVkRXdFQi93UUNNQUF3SFFZRApWUjBPQkJZRUZMTWRXMmxweE9EWGlaeC9WbkptUitPUmdHcHhNQjhHQTFVZEl3UVlNQmFBRkJRdXN4ZTNXRmJMCnJsQUpRT1lmcjUyTEZNTEdNRlVHQ0NzR0FRVUZCd0VCQkVrd1J6QWhCZ2dyQmdFRkJRY3dBWVlWYUhSMGNEb3YKTDNJekxtOHViR1Z1WTNJdWIzSm5NQ0lHQ0NzR0FRVUZCekFDaGhab2RIUndPaTh2Y2pNdWFTNXNaVzVqY2k1dgpjbWN2TUJzR0ExVWRFUVFVTUJLQ0VHRndhUzU0YVdGdmQyVnVlQzVqYjIwd1RBWURWUjBnQkVVd1F6QUlCZ1puCmdRd0JBZ0V3TndZTEt3WUJCQUdDM3hNQkFRRXdLREFtQmdnckJnRUZCUWNDQVJZYWFIUjBjRG92TDJOd2N5NXMKWlhSelpXNWpjbmx3ZEM1dmNtY3dnZ0VEQmdvckJnRUVBZFo1QWdRQ0JJSDBCSUh4QU84QWRnQmMzRU9TL3VhcgpSVVN4WHByVVZ1WVFOL3ZWK2tmY29YT1VzbDdtOXNjT3lnQUFBWGJtU3RKK0FBQUVBd0JITUVVQ0lDUWdDMlJjCjJ0ZkdCTEZpY1d3YnJraldqV2s4aEVpWDBTNUw2YTRkNnAyNkFpRUF6RHhzNnRaOXp3VkJQZVVjTHlZVGprY2kKT0NVY3dwNDQ0TEh4YnFuUko5WUFkUUI5UHZMNGovK0lWV2drd3NES25sS0plU3ZGRG5nSmZ5NXFsMmlaZmlMdwoxd0FBQVhibVN0TVRBQUFFQXdCR01FUUNJRzNjSm9DT2VrMVBpZlgycDBFSGZ6bDNPTDNTUVcyVWs2TUdHRWwzCjRmK0NBaUJIWWtObUdHU1RSNTZpMFdZMzdlL0VaR2x4WCtPTUFwcUFHVzNZczdUa2pqQU5CZ2txaGtpRzl3MEIKQVFzRkFBT0NBUUVBR211aFVhVGNVUElhbGpndjl3dDcxbXhJb282N2NQajM0K1M2YW50dDJuOEJyRW1nTEk1OAprU0Nybk1xZGI4OXJGRmVFMENXdDJkd2NkeFpobnowZzV3aTMzTmhWdmN2RXN4OGZncis4bGdwczdIdHpvNFFhCjV0V2s5Uk42NDRMNFZSSGtQNVN3Q3J2OUtrWTd5cEZGcHAzazFTbnJwTEdrTVdLTDk5SmdLcnpDbEpVSDhFS3IKRU9QRVFLYUUyTTI0QklTUmdnaHNIMW01NlBCM3d3Vm1DZ1FjMmtrTkZEWnhTMnFXQ1o1N0Q3eUkyY3lmdXY1TAp1YVMxZWpuZjBqQi82S3VZZ053MC9VNHVpVjJGRUM1WHk1SzlIY2ZRVFhEZzdCbkg0MWZpbzFacU1yb3p3NHltClNZTXBYUUZBMUlTdklCRHJoUmhoRVlLdEtzNlB0VDg5ZkE9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCgotLS0tLUJFR0lOIENFUlRJRklDQVRFLS0tLS0KTUlJRVpUQ0NBMDJnQXdJQkFnSVFRQUYxQklNVXBNZ2hqSVNwREJiTjN6QU5CZ2txaGtpRzl3MEJBUXNGQURBLwpNU1F3SWdZRFZRUUtFeHRFYVdkcGRHRnNJRk5wWjI1aGRIVnlaU0JVY25WemRDQkRieTR4RnpBVkJnTlZCQU1UCkRrUlRWQ0JTYjI5MElFTkJJRmd6TUI0WERUSXdNVEF3TnpFNU1qRTBNRm9YRFRJeE1Ea3lPVEU1TWpFME1Gb3cKTWpFTE1Ba0dBMVVFQmhNQ1ZWTXhGakFVQmdOVkJBb1REVXhsZENkeklFVnVZM0o1Y0hReEN6QUpCZ05WQkFNVApBbEl6TUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FROEFNSUlCQ2dLQ0FRRUF1d0lWS016Mm9KVFREeExzCmpWV1N3L2lDOFptbWVrS0lwMTBtcXJVcnVjVk1zYStPYS9sMXlLUFhEMGVVRkZVMVY0eWVxS0k1R2ZXQ1BFS3AKVG03MU84TXUyNDNBc0Z6eldUam43YzlwOEZvTEc3N0FsQ1FsaC9vM2NiTVQ1eHlzNFp2djIrUTdSVkpGbHFuQgpVODQweUZMdXRhN3RqOTVnY09LbFZLdTJiUTZYcFVBMGF5dlR2R2JyWmpSOCttdUxqMWNwbWZnd0YxMjZjbS83CmdjV3Qwb1pZUFJmSDV3bTc4U3YzaHR6QjJuRmQxRWJqekswbHdZaThZR2QxWnJQeEdQZWlYT1pUL3pxSXRrZWwKL3hNWTZwZ0pkeitkVS9uUEFlWDFwbkFYRks5anBQK1pzNU9kM0ZPbkJ2NUloUjJoYWE0bGRic1R6RklEOWUxUgpvWXZiRlFJREFRQUJvNElCYURDQ0FXUXdFZ1lEVlIwVEFRSC9CQWd3QmdFQi93SUJBREFPQmdOVkhROEJBZjhFCkJBTUNBWVl3U3dZSUt3WUJCUVVIQVFFRVB6QTlNRHNHQ0NzR0FRVUZCekFDaGk5b2RIUndPaTh2WVhCd2N5NXAKWkdWdWRISjFjM1F1WTI5dEwzSnZiM1J6TDJSemRISnZiM1JqWVhnekxuQTNZekFmQmdOVkhTTUVHREFXZ0JURQpwN0drZXl4eCt0dmhTNUIxLzhRVllJV0pFREJVQmdOVkhTQUVUVEJMTUFnR0JtZUJEQUVDQVRBL0Jnc3JCZ0VFCkFZTGZFd0VCQVRBd01DNEdDQ3NHQVFVRkJ3SUJGaUpvZEhSd09pOHZZM0J6TG5KdmIzUXRlREV1YkdWMGMyVnUKWTNKNWNIUXViM0puTUR3R0ExVWRId1ExTURNd01hQXZvQzJHSzJoMGRIQTZMeTlqY213dWFXUmxiblJ5ZFhOMApMbU52YlM5RVUxUlNUMDlVUTBGWU0wTlNUQzVqY213d0hRWURWUjBPQkJZRUZCUXVzeGUzV0ZiTHJsQUpRT1lmCnI1MkxGTUxHTUIwR0ExVWRKUVFXTUJRR0NDc0dBUVVGQndNQkJnZ3JCZ0VGQlFjREFqQU5CZ2txaGtpRzl3MEIKQVFzRkFBT0NBUUVBMlV6Z3lmV0VpRGN4MjdzVDRyUDhpMnRpRW14WXQwbCtQQUszcUI4b1lldk80QzV6NzBrSAplaldFSHgydGFQRFkvbGFCTDIxL1dLWnVOVFlRSEhQRDViMXRYZ0hYYm5MN0txQzQwMWRrNVZ2Q2FkVFFzdmQ4ClM4TVhqb2h5Yzl6OS9HMjk0OGtMam1FNkZsaDlkRFlyVllBOXgyTytoRVBHT2FFT2ExZWVQeW5CZ1BheXZVZkwKcWpCc3R6TGhXVlFMR0FrWFhtTnMrNVpuUEJ4ekRKT0x4aEYySkliZVFBY0g1SDB0WnJVbG81Wll5T3FBN3M5cApPNWI4NW8zQU0vT0orQ2t0RkJRdGZ2QmhjSlZkOXd2bHdQc2srdXlPeTJISTdtTnhLS2dzQlR0Mzc1dGVBMlR3ClVkSGtoVk5jc0FLWDFIN0dOTkxPRUFEa3NkODZ3dW9Ydmc9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  tls.key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBMU41QVZ2L21Eb2NIdnladlN4Q1RsRC9hanNnZVVHUm1GNGVldGk5VkI0U255Ym85CmZjL21UN082SklDWVdvYWZhMk55bmJMUUhWdi93Z1BPOG83d1lBYmcrNzFmcDVDd2dXMW92Y3JYM1dJeVJTeFQKVDVad0J5WU0zN0pkNW9hTTM5QWhCY1pLNktWVjVvbHNZQmhNeFZhVFgxdVY1MFF6QkY4YjZmdnBFMTdDRjVqbAo3Y09zT2pPZ3ZrYzFIK1ZQNFdNVTZDRFdPS2IyZHVwZWRDM2dMc0JBRUk0R0Eza0FRSFlURmFwN3d6c0R1K0txCmZnUC9rYi83MUlWQkZmeWoycTV0R0hDVXVxTzkza3U3cXFqV2ZjZkZzNHVxRE5YZDM4ZXg5Um40TGRhTytDMHgKS0FhaC9Ua0tEdjFVK1A1ekFqdzJpRVJxUHUrQXo4azZIWGpqVFFJREFRQUJBb0lCQUdLUm84TmxiWmN1aWJURwp6R1E3QWN0MUlmUlowRWV6cGQ2aGF5bTdreWtQRVU4RkVYSlBzYnNZWTBxQnpZcWxxZTVsTjI2MG5VL3JDT3hECkxUSCtaR3BpNVExTTdKMUFENnR2Q1VCUlRGSDBKWWtJZEc5M0h0c0FrSmVKRlpnb2w5VVBvQ3IzWGpxS1ROT2EKc1BkeWFTSTc2N1FOU2NXME85ZDdYd2FqSXBOWHhnbVEvZ1RGZFpQOFJZTkhWRUNFUk5YeC82c1FUR2lzZXRRNApjMFNJeWgxS1pZdVREdTZTMkEyVnljZTE3YkE4ZmU5QjdtcGZYS1FMKzlINUlyVExkanNUendERjZSUzF3MDFwCkpmSHo1cjA1ZkJUcXArQWEyYjJHZE8wVVVZWlBvK2MzRWxxMFkxQjE1SnlzZHEzWlo2QXkzSU1iMDM4c00wY2wKRW9rMEtTRUNnWUVBOXZKYXROOG9qTTJTV1oxWE4wVXdoRTdqN0RzNGg4ZWU0RC9vQXhEcWJ2aHYyUkYwSlVqbwo0Uk1MMXJzZU5qSnFTSHZSR2NxV1YxRFU5eHVPTWtVdXB1WW5SMkRxQlFSMTNBK3prV2E2eUhqakJuNXAzN1k2Cm5Yckl6ZEJpL1BjK0dvUlFiZldpdjIzYncySU1qZ09FTTRHQzBRbVQvYXBHWjRIUlJiOXFCRGtDZ1lFQTNLd1EKSUtCTjZtMVpLaTVSWXV5cFhKMXArdDVrVXpEcnRvd21JeW5kdGI1Y2wraENxUlRHNGFiYmhtRzRoYm9IN05paApaYytZNC9FTEFncFI1WmMyV0wraXA5bTNiQ3FpM250YTNpeUh5RDd5VVVUemhhR05VMDNudzlSMm5JSVR5dFlECk83SHpFS010bnpJVTNNVm83T2xoNzl2RU43OWZrOUJ1M2lNSkg3VUNnWUI4VlpmUCs0L3FITkx6NWVGMHhaUmcKK1d1T2xGNnBGcHZxb3FLSmNLbm9oNU9oQWtXdFJDRmt1WGM3ZldqL3RyQ0dvRGl1dUs2cmRkcFVOSDZLMXdSZgpLZ0JhMHZQZzVOY0ducTAxcHppaUdTT05NSGJVR1djM3hRdDNmTlZxTW40RlVkdEJFZTBJWHlMSUpBVFlOL01ICkQ4MHl2SlRUb2pqaWdwMUFkZGpHR1FLQmdRQ0tJd2VoZE5meGRPd0pGSitMM253U1p0UE4zK05MbEdjcGljZmgKNFRaUnE4Mklwakw4WnU0c21XZjRVam5STkdmN29vdytFRnN6N1ZNbnZ0QVBlYjNpaG12S3lPWWlSdnBYYlQ2dgpyNDU4RXJOYm5sOFcrczllSTNsK3hBUlA2cmw3RXNkSldoYS9CbmJybmMwamVrdzVhY3NOL0ROemRrL2RWdS9nCkRHeU10UUtCZ1FEenFUVkxFT251UU5LNytodHgxZDM3ajAvaDJwcjNmck52VkI4bnZKWEJ3Q3NSRFJSRXZtM1IKUmcrV1lpYzJhc0cyUGlreXozZUU3QzE2TnM0NFlwWlJPTjNJcUxSVmduMGs0OVNuN1BCYVJRTnVBY2RTYm1oSwp6QVMybXBZQzlxWExwLytDalphNW9HMFUxVmlDdU9hK09tMFNtZExpaVRxUTNWSDRVRjQ4b3c9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=
kind: Secret
metadata:
  name: api.xiaowenx.com
  namespace: istio-system
type: kubernetes.io/tls
