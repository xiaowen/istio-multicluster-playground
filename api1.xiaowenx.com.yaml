apiVersion: networking.istio.io/v1alpha3
kind: Gateway
metadata:
  name: api1
spec:
  selector:
    istio: ingressgateway # use Istio default gateway implementation
  servers:
  - port:
      number: 80
      name: http
      protocol: HTTP
    hosts:
    - api1.xiaowenx.com
  - port:
      number: 443
      name: https
      protocol: HTTPS
    tls:
      mode: SIMPLE
      credentialName: api1.xiaowenx.com # must be the same as secret
    hosts:
    - api1.xiaowenx.com

---

apiVersion: v1
data:
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZLVENDQkJHZ0F3SUJBZ0lTQS9mNDhRbGRqY2llUHJxUjlYc2lTUVRnTUEwR0NTcUdTSWIzRFFFQkN3VUEKTURJeEN6QUpCZ05WQkFZVEFsVlRNUll3RkFZRFZRUUtFdzFNWlhRbmN5QkZibU55ZVhCME1Rc3dDUVlEVlFRRApFd0pTTXpBZUZ3MHlNVEF4TURrd056TXhNRE5hRncweU1UQTBNRGt3TnpNeE1ETmFNQnd4R2pBWUJnTlZCQU1UCkVXRndhVEV1ZUdsaGIzZGxibmd1WTI5dE1JSUJJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBUThBTUlJQkNnS0MKQVFFQXM0ZmozYXkvZDB6bWFieEhodnUwT1FSbGx4ZmNGaWk2bU55TlJ0L3lDZ0laeDlkOTFMM01kV1NPbDkrSwpjcjJVSE9lYWMybnBoODMvUU1laWpPd2hTV3RqU01UV3hkZ1p6TUJSQ2tqak1ibFoySzU1OTY5Q1FLZklUVHFaCmdtSFUvM0paa0F4U3RhRFZ0SFpTRWxWTzdYb0tMQ2FGNkMreGs2ZDEwb0x4eFd4eHE5TlNiUiswdWdLdDBxZ1cKamFEemJDNURFVWlHeENzdjlDalJrUVovVWZUMEtPSFE0dlJQRzJ3elJIQXpVa2p1NnhYb01BT0JOT21KYlQ5aQp1RXpFNWtrSzFtM0pCUWpCZVdZYWYrYVgvMzlqTUMzSDlaUVdMdVVZYXlmZkkyTWk0enRCWmhFL3ZuZEhENTk4Cm9FYU9EZ2c5YXJaanNiaGVrS3FZQlR6REt3SURBUUFCbzRJQ1RUQ0NBa2t3RGdZRFZSMFBBUUgvQkFRREFnV2cKTUIwR0ExVWRKUVFXTUJRR0NDc0dBUVVGQndNQkJnZ3JCZ0VGQlFjREFqQU1CZ05WSFJNQkFmOEVBakFBTUIwRwpBMVVkRGdRV0JCVDEwN2V1SE02UktsRmpRV1N0YVNPdFRlTlk4akFmQmdOVkhTTUVHREFXZ0JRVUxyTVh0MWhXCnk2NVFDVURtSDYrZGl4VEN4akJWQmdnckJnRUZCUWNCQVFSSk1FY3dJUVlJS3dZQkJRVUhNQUdHRldoMGRIQTYKTHk5eU15NXZMbXhsYm1OeUxtOXlaekFpQmdnckJnRUZCUWN3QW9ZV2FIUjBjRG92TDNJekxta3ViR1Z1WTNJdQpiM0puTHpBY0JnTlZIUkVFRlRBVGdoRmhjR2t4TG5ocFlXOTNaVzU0TG1OdmJUQk1CZ05WSFNBRVJUQkRNQWdHCkJtZUJEQUVDQVRBM0Jnc3JCZ0VFQVlMZkV3RUJBVEFvTUNZR0NDc0dBUVVGQndJQkZocG9kSFJ3T2k4dlkzQnoKTG14bGRITmxibU55ZVhCMExtOXlaekNDQVFVR0Npc0dBUVFCMW5rQ0JBSUVnZllFZ2ZNQThRQjNBUFpjbEMvUgpkekFpRkZRWUNEQ1VWbzdqVFJNWk03L2ZEQzhnQzh4TzhXVGpBQUFCZHVaRk5RVUFBQVFEQUVnd1JnSWhBTHpECjlPbWVWSUV2YktUbmY3d1BxQzhad3Eyd3BMVS9ZeGZSZk80ZVhlSHFBaUVBNGVLZXFBcytwYkErMnNXUGdYWlQKbE90SHcvSkxSOWFFZU1Sd1lWTDlCaGNBZGdCRWxHVXVzTzdPcjhSQUI5aW8vaWpBMnVhQ3Z0akxNYlUvMHpPVwp0YmFCcUFBQUFYYm1SVGNBQUFBRUF3QkhNRVVDSUd0K29Tb0duby9qcXltSzM0djJzdHpTaEpRSDRIZExYbWNMCnlFUjgwbGYvQWlFQXJIQ2VTc1VNWGJMTmp0T3RvZGYrckp2SXF3YnFicXBodmRIMlVhelAzMmt3RFFZSktvWkkKaHZjTkFRRUxCUUFEZ2dFQkFKekRlL0lvaVJKUE9EN3I0Z1VhVnNNWEZESXJRREVlTWI3dDNiREpqdm9BWE4vNApGaUtMU3haOTNuSnhsNGxrcGdtRDhRVEwwc0VrWldIY2U2TnJzZzNJWjBXekRKZzlJbWJVeFpjNWN4alo3b1owCkJ4S2N4YVlpeUNoVTJPVFl0dXUzSkkrRVZuK2hTa1dVM1BHZnNlOTl6cWVpZDR0M2ZmSHR6VHgvU3VPVzBsWEwKbDhKRVlTQXhsb1YyV3U0SUVpTmNCZmlsU3lFczhlcTRjc29DTDc5ZUdianJDdk1DdGRlR1Y2eSs0U2pDWnlBRwpIVGlzbmxNeG9DSjZzZFg2a0JiOS9oKzgwb0R2ek55eUs3WFZ2OE52MFpQUUFZcWZSRUo5TVFpckhrSnBLelorClZyd0JocWF2U0JJRVRxalhxdUVlRHY5VzA2YUR0RVV0Y3pvQ0QrRT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQoKLS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVaVENDQTAyZ0F3SUJBZ0lRUUFGMUJJTVVwTWdoaklTcERCYk4zekFOQmdrcWhraUc5dzBCQVFzRkFEQS8KTVNRd0lnWURWUVFLRXh0RWFXZHBkR0ZzSUZOcFoyNWhkSFZ5WlNCVWNuVnpkQ0JEYnk0eEZ6QVZCZ05WQkFNVApEa1JUVkNCU2IyOTBJRU5CSUZnek1CNFhEVEl3TVRBd056RTVNakUwTUZvWERUSXhNRGt5T1RFNU1qRTBNRm93Ck1qRUxNQWtHQTFVRUJoTUNWVk14RmpBVUJnTlZCQW9URFV4bGRDZHpJRVZ1WTNKNWNIUXhDekFKQmdOVkJBTVQKQWxJek1JSUJJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBUThBTUlJQkNnS0NBUUVBdXdJVktNejJvSlRURHhMcwpqVldTdy9pQzhabW1la0tJcDEwbXFyVXJ1Y1ZNc2ErT2EvbDF5S1BYRDBlVUZGVTFWNHllcUtJNUdmV0NQRUtwClRtNzFPOE11MjQzQXNGenpXVGpuN2M5cDhGb0xHNzdBbENRbGgvbzNjYk1UNXh5czRadnYyK1E3UlZKRmxxbkIKVTg0MHlGTHV0YTd0ajk1Z2NPS2xWS3UyYlE2WHBVQTBheXZUdkdiclpqUjgrbXVMajFjcG1mZ3dGMTI2Y20vNwpnY1d0MG9aWVBSZkg1d203OFN2M2h0ekIybkZkMUVianpLMGx3WWk4WUdkMVpyUHhHUGVpWE9aVC96cUl0a2VsCi94TVk2cGdKZHorZFUvblBBZVgxcG5BWEZLOWpwUCtaczVPZDNGT25CdjVJaFIyaGFhNGxkYnNUekZJRDllMVIKb1l2YkZRSURBUUFCbzRJQmFEQ0NBV1F3RWdZRFZSMFRBUUgvQkFnd0JnRUIvd0lCQURBT0JnTlZIUThCQWY4RQpCQU1DQVlZd1N3WUlLd1lCQlFVSEFRRUVQekE5TURzR0NDc0dBUVVGQnpBQ2hpOW9kSFJ3T2k4dllYQndjeTVwClpHVnVkSEoxYzNRdVkyOXRMM0p2YjNSekwyUnpkSEp2YjNSallYZ3pMbkEzWXpBZkJnTlZIU01FR0RBV2dCVEUKcDdHa2V5eHgrdHZoUzVCMS84UVZZSVdKRURCVUJnTlZIU0FFVFRCTE1BZ0dCbWVCREFFQ0FUQS9CZ3NyQmdFRQpBWUxmRXdFQkFUQXdNQzRHQ0NzR0FRVUZCd0lCRmlKb2RIUndPaTh2WTNCekxuSnZiM1F0ZURFdWJHVjBjMlZ1ClkzSjVjSFF1YjNKbk1Ed0dBMVVkSHdRMU1ETXdNYUF2b0MyR0syaDBkSEE2THk5amNtd3VhV1JsYm5SeWRYTjAKTG1OdmJTOUVVMVJTVDA5VVEwRllNME5TVEM1amNtd3dIUVlEVlIwT0JCWUVGQlF1c3hlM1dGYkxybEFKUU9ZZgpyNTJMRk1MR01CMEdBMVVkSlFRV01CUUdDQ3NHQVFVRkJ3TUJCZ2dyQmdFRkJRY0RBakFOQmdrcWhraUc5dzBCCkFRc0ZBQU9DQVFFQTJVemd5ZldFaURjeDI3c1Q0clA4aTJ0aUVteFl0MGwrUEFLM3FCOG9ZZXZPNEM1ejcwa0gKZWpXRUh4MnRhUERZL2xhQkwyMS9XS1p1TlRZUUhIUEQ1YjF0WGdIWGJuTDdLcUM0MDFkazVWdkNhZFRRc3ZkOApTOE1Yam9oeWM5ejkvRzI5NDhrTGptRTZGbGg5ZERZclZZQTl4Mk8raEVQR09hRU9hMWVlUHluQmdQYXl2VWZMCnFqQnN0ekxoV1ZRTEdBa1hYbU5zKzVablBCeHpESk9MeGhGMkpJYmVRQWNINUgwdFpyVWxvNVpZeU9xQTdzOXAKTzViODVvM0FNL09KK0NrdEZCUXRmdkJoY0pWZDl3dmx3UHNrK3V5T3kySEk3bU54S0tnc0JUdDM3NXRlQTJUdwpVZEhraFZOY3NBS1gxSDdHTk5MT0VBRGtzZDg2d3VvWHZnPT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
  tls.key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb2dJQkFBS0NBUUVBczRmajNheS9kMHptYWJ4SGh2dTBPUVJsbHhmY0ZpaTZtTnlOUnQveUNnSVp4OWQ5CjFMM01kV1NPbDkrS2NyMlVIT2VhYzJucGg4My9RTWVpak93aFNXdGpTTVRXeGRnWnpNQlJDa2pqTWJsWjJLNTUKOTY5Q1FLZklUVHFaZ21IVS8zSlprQXhTdGFEVnRIWlNFbFZPN1hvS0xDYUY2Qyt4azZkMTBvTHh4V3h4cTlOUwpiUiswdWdLdDBxZ1dqYUR6YkM1REVVaUd4Q3N2OUNqUmtRWi9VZlQwS09IUTR2UlBHMnd6UkhBelVranU2eFhvCk1BT0JOT21KYlQ5aXVFekU1a2tLMW0zSkJRakJlV1lhZithWC8zOWpNQzNIOVpRV0x1VVlheWZmSTJNaTR6dEIKWmhFL3ZuZEhENTk4b0VhT0RnZzlhclpqc2JoZWtLcVlCVHpES3dJREFRQUJBb0lCQUJPZlI2V0Q2dzFrQjA4SgpPQndseUtYdXVCZlNrTWlQUFEzV0ZVN296VENRMkRhQ2RBdGJqMHhKYUZockkxdTFJc29oK2p5aEY5Z3pDTElRCjM5QmRRcW9lcGFSZmQwWDZmNTlrYWJjaERrdnlBVUx3bHY0ZVZyUndZakVtdFg2TnFOVWVyM0ZTRjN3b2p4TUIKVjZrUFQrZ2V6WnZUdmhFSm5YUVErb3krcVNRMXJoMmlPTjZ3cDJNampMd0pDZGxETWdDVDlsbXlVRGUycE1tdQp0cjJUU3orYXhyYWhtWHE0cXU1MVNRaWdTSEsxd0RydUFkOXQ2VEYvdFV1aTh3MnNwOHh4eUE5Y3dPbm9NWndTCllJMmdVbHEzSjBFVnBHc3FDN2k3WVB5amFuNmdiK2h4NkJBMDFKT29IL3FHTGRKYzFWUjNZRFVkU0J6c1pRT3kKS1d6Y3R2a0NnWUVBeHp6K1FoM2pPQ3NzQ3gwZkVUVGNob0Faa25USzd6K2tkNTFxNXI3MlVVNVNNak9BelIwTgpmWW9XOWZ0L21UeDlwZG52ZU5jVEVBQWc0QzF0RDZGQ2FlNkNZZm0vdTloeWVLd3BWSUgweU0zbmpDclh3dTllCmFBK2JmcGx5bnZxMm5nekVnbVA0dTUwandMV1RWcG9qK2E5dFhLNm1IdkYzWlhnRVQxSFdPNGNDZ1lFQTVxMlUKQ1R4OWZsRU1MVzJIWVlzTkFKclBwTy9QaTRJaS9XQVdiWjJoN2prc0Y1TTZWMGk4MW1OVUwzVCt0MXNWMXUxbgpCZFJqNUxOZ0tzR0NyRVhWWDNlcWVxVmw0bFhCT1hYSXRMR3VlalJjMWVlSWdFdTBzNUFCWWNlTExrbXA1QTBkCm9VNExuejBrWExFKzJhRkJidm5DYXNjVzZHM2tlMjhZcms1M3pEMENnWUIxYTV6dG1tK3ZTc0pLU245a3hLS3oKSWd2d0pLVDFHNnp5VWZRT3lieWhibWRDN3RlYUN1VklkM25RdnNnVXAzSGxyT3RWYkd2dm9pTzkrd2Vyam41MQpyL3RuZ3FsZEs5TkxDeXZRZ2thaGtiaEZBM3JsaCswN3B2Y2RSWkluMzlxQWkwWEZFdVlrckJmR0d6MGFiUDJHCnliektRcVBrMktwbFFyWkhpUk9aUVFLQmdHcHI3Qjd5dkVhNVoyL1IxeUptUDBKbkthTERUREhsZ1BUNkRuN1YKdVc0cERERjRKL002eUh2ejZWUFhtdWZHYXVYME1wSmE4UmNDdGp3amVJQzMydituT294SW9COXlScW1Xc0ZqRQpuR1Vlb1RIQ0ZwUngyTlQ2ZTlpN2NYZVNYb0dxbDEvaW5MUURSakpKUjJDcDU0RW1VczVtT1NoVUFwUDdwaHhNCmNUSlZBb0dBYkRGdVhxL2lWdVhvZFlvcGgvS0pJaWJGR0JjT25adW95bnpwa3ZiNndXc015RHZONzJBQ0REQ0YKTEFkTmNTVmpOTjJwcmZITS91QTJtaEsxaXIyYkJrUVpoQ01qZzVQNTNMeTJMckZ4cnZoSDFqUitReTJXWUIrMAo2M25EYWZlNUtPZGlRTmEwRkZNSXR0OStMSFBGY1Zsb1BPZEtFZjAxQnR3OTByWGJSL3c9Ci0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg==
kind: Secret
metadata:
  name: api1.xiaowenx.com
  namespace: istio-system
type: kubernetes.io/tls
